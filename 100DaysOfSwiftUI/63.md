# Day 63 of 100DaysOfSwiftUI - 2022-08-05

Today I learned how to create image effects with swift ui


## Image Effects

1. Create a UIImage
2. Create CIContext for create a CI Image.  A CI Image is like a recipe for creating the new image with the effect
3. Add the effects to the image
4. Get the CI Image
5. Feed the CI image into context.createCGImage function
6. Use the ciImage to create a cg image (cg = Core Graphics)
7. Use a UIImage to create a Swift Image

```swift
import SwiftUI
import CoreImage
import CoreImage.CIFilterBuiltins

struct ContentView: View {
    
    @State private var image: Image?
    
    var body: some View {
        VStack {
            image?.resizable()
                .scaledToFit()
        }.onAppear(perform: loadImage)
        
    }
    
    func loadImage() {
        guard let inputImage = UIImage(named: "Example") else { return }
        let beginImage = CIImage(image: inputImage)
        
        let context = CIContext()
        let currentFilter = CIFilter.twirlDistortion()
        
        let amount = 1.0
        let inputKeys = currentFilter.inputKeys
        
        
        if inputKeys.contains(kCIInputIntensityKey) {
            currentFilter.setValue(amount, forKey: kCIInputIntensityKey)
        }
        
        if inputKeys.contains(kCIInputRadiusKey) {
            currentFilter.setValue(amount * 200, forKey: kCIInputRadiusKey)
        }
        
        if inputKeys.contains(kCIInputScaleKey) {
            currentFilter.setValue(amount * 10, forKey: kCIInputScaleKey)
        }
        
        currentFilter.inputImage = beginImage
     
        
        guard let outputImage = currentFilter.outputImage else { return }
        
        if let cgImage = context.createCGImage(outputImage, from: outputImage.extent) {
            let uiImage = UIImage(cgImage: cgImage)
            image = Image(uiImage: uiImage)
        }
        
    }
}

```
